<div class="loading-page">
    <div class="container">
        <button type="button" (click)="onNewValidationClick()" class="btn btn-primary">New Validation</button>
    </div>
    <div class="container">
        <form [formGroup]="searchForm">
            <fieldset class="search-form-border">
                <legend class="search-form-border">Report Search</legend>
                <div class="form-row">
                    <div class="col-4">
                        <div class="form-group row">
                            <label for="fromDate" class="search-form-label col-form-label col-form-label-sm">From</label>

                            <div class="search-form-input input-group">
                                <input class="form-control form-control-sm" placeholder="MM/DD/YYYY" name="dp" formControlName="fromDate" ngbDatepicker #dbFrom="ngbDatepicker">

                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary calendar" (click)="dbFrom.toggle()" type="button">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row">
                            <label for="toDate" class="search-form-label col-form-label col-form-label-sm">To</label>

                            <div class="search-form-input input-group">
                                <input class="form-control form-control-sm" placeholder="MM/DD/YYYY" name="dp" formControlName="toDate" ngbDatepicker #dbTo="ngbDatepicker">

                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary calendar" (click)="dbTo.toggle()" type="button">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="col-sm-4">
                        <div class="form-group row">
                            <label for="status" class="search-form-label col-form-label col-form-label-sm">Status</label>
                            <div class="search-form-input">
                                <select id="status" class="form-control form-control-sm" formControlName="status">
                                    <option selected>-Select-</option>
                                    <option *ngFor="let status of statuses">{{status}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row">
                            <label for="dataType" class="search-form-label col-form-label col-form-label-sm">Data
                                Type</label>
                            <div class="search-form-input">
                                <select id="dataType" class="form-control form-control-sm" formControlName="dataType">
                                    <option selected>-Select-</option>
                                    <option *ngFor="let type of dataTypes">{{type.name}}</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-3">
                        <button type="submit" class="btn btn-primary" (click)="search()" [disabled]="!isValid()">Search</button>
                    </div>
                </div>

            </fieldset>
        </form>
    </div>

    <div class="text-center" [hidden]="!isLoading">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>

    <div class="container" [hidden]="isLoading">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Data Type</th>
                    <th scope="col">Input File Name</th>
                    <th scope="col">Run Date/Time</th>
                    <th scope="col">Status</th>
                    <th scope="col">Report</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let validation of validations">
                    <td>{{ validation.dataType.name }}</td>
                    <td>
                        <span><a href="validation.inputFilePath">{{ validation.inputFileName }}</a></span>
                    </td>
                    <td>{{ validation.runTime }}</td>
                    <td>{{ validation.status }}</td>
                    <td>
                        <a href="#">Report</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="d-flex justify-content-center p-2">
            <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize" (pageChange)="setPageTo()">
            </ngb-pagination>
        </div>
    </div>
</div>